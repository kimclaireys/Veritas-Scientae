<!DOCTYPE html>
<html>
<head>
  <title>Submit Paper</title>
</head>
<body>

<h2>Upload Research Paper (PDF)</h2>

<input type="file" id="pdfFile" accept="application/pdf">
<button onclick="uploadPDF()">Upload</button>

<p id="status"></p>

<script>
  async function uploadPDF() {
    const file = document.getElementById("pdfFile").files[0];
    if (!file) {
      alert("Select a PDF file first!");
      return;
    }

    const cloudName = "YOUR_CLOUD_NAME";  // ğŸ”¥ ì—¬ê¸° ë„¤ Cloudinary cloud name ë„£ê¸°
    const url = `https://api.cloudinary.com/v1_1/${cloudName}/upload`;

    const formData = new FormData();
    formData.append("file", file);
    formData.append("upload_preset", "ucl78zu2");

    document.getElementById("status").innerText = "Uploading...";

    const response = await fetch(url, {
      method: "POST",
      body: formData
    });

    const data = await response.json();
    document.getElementById("status").innerHTML =
      `Upload complete! <br><a href="${data.secure_url}" target="_blank">View PDF</a>`;
  }
</script>

</body>
  <h2>ë…¼ë¬¸ ì—…ë¡œë“œ</h2>

<input type="text" id="title" placeholder="ë…¼ë¬¸ ì œëª©"><br><br>

<select id="category">
  <option value="research">Research</option>
  <option value="reviews">Review</option>
</select><br><br>

<button onclick="uploadPost()">ì—…ë¡œë“œ</button>

<p id="status"></p>
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
import { getAuth } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-auth.js";
import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyDa-v9FqEv5o-o0mJxq00j0m9XCbGORsRc",
  authDomain: "veritas-scientae.firebaseapp.com",
  projectId: "veritas-scientae",
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

window.uploadPost = async function () {
  const user = auth.currentUser;

  if (!user) {
    document.getElementById("status").innerText = "âŒ ë¡œê·¸ì¸ í›„ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤!";
    return;
  }

  const title = document.getElementById("title").value;
  const category = document.getElementById("category").value;

  if (title === "") {
    document.getElementById("status").innerText = "ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”!";
    return;
  }

  await addDoc(collection(db, category), {
    title: title,
    author: user.email,
    createdAt: serverTimestamp()
  });

  document.getElementById("status").innerText = "âœ… ì—…ë¡œë“œ ì™„ë£Œ!";
}
  import { getAuth, onAuthStateChanged } 
from "https://www.gstatic.com/firebasejs/12.9.0/firebase-auth.js";

const auth = getAuth();

onAuthStateChanged(auth, (user) => {
  if (!user) {
    // ë¡œê·¸ì¸ ì•ˆ í•œ ê²½ìš°ë§Œ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë³´ëƒ„
    window.location.href = "login.html";
  }
});

</script>

</html>
